<section class="bg-white py-24">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-extrabold text-[#1A1A1A]">See the Magic in Action</h2>
      <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
        Type a command or try one of our suggestions to see how Base44's AI can streamline your workflow.
      </p>
    </div>

    <div class="max-w-3xl mx-auto bg-white border border-gray-200 rounded-2xl p-6 sm:p-8 shadow-lg">
      <!-- Input Area -->
      <div class="relative">
        <textarea 
          rows="3"
          [value]="prompt()"
          (input)="onPromptInput($event)"
          [disabled]="isLoading()"
          placeholder="e.g., 'Draft a follow-up email to a lead who missed a demo.'"
          class="w-full p-4 pr-32 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all text-base resize-none disabled:bg-gray-100"
        ></textarea>
        <button 
          (click)="generate()"
          [disabled]="!prompt().trim() || isLoading()"
          class="absolute right-3 top-1/2 -translate-y-1/2 bg-gray-800 text-white font-semibold py-2 px-5 rounded-lg hover:bg-gray-900 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[120px]"
        >
          @if(isLoading()) {
            <svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span>Generating...</span>
          } @else {
            <span>Generate</span>
          }
        </button>
      </div>

      <!-- Suggestions -->
      <div class="mt-4">
        <p class="text-sm font-medium text-gray-500 mb-2">Or try one of these:</p>
        <div class="flex flex-wrap gap-2">
          @for(suggestion of suggestedPrompts; track suggestion) {
            <button 
              (click)="useSuggestion(suggestion)"
              [disabled]="isLoading()"
              class="bg-gray-100 text-gray-700 text-sm font-medium px-3 py-1.5 rounded-full hover:bg-gray-200 transition-colors disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed text-left"
            >
              {{ suggestion }}
            </button>
          }
        </div>
      </div>

      <!-- Response Area -->
      @if (isLoading() || response() || error()) {
        <div class="mt-6 border-t border-gray-200 pt-6">
          <h3 class="text-lg font-bold text-[#1A1A1A] mb-3 flex items-center">
            <svg class="h-6 w-6 mr-2 text-orange-500" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="16" cy="16" r="16" fill="currentColor"/>
              <path d="M16 5.33331C9.00002 5.33331 5.33335 9.00002 5.33335 16" stroke="white" stroke-width="3" stroke-linecap="round"/>
              <path d="M26.6667 16C26.6667 23 23 26.6667 16 26.6667" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </svg>
            Base44 AI Response
          </h3>
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 min-h-[100px] text-base">
             @if (isLoading() && !response()) {
               <div class="flex items-center justify-center h-full text-gray-500">
                  <svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span>Thinking...</span>
               </div>
            } @else if(error()) {
              <p class="text-red-600 font-semibold">{{ error() }}</p>
            } @else if(response()) {
              <pre class="whitespace-pre-wrap font-sans text-gray-800">{{ response() }}</pre>
            }
          </div>
        </div>
      }
    </div>
  </div>
</section>